<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Tharparkar 3D Map ‚Äì Mobile Optimized</title>

  <!-- Cesium -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.110/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.110/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

  <style>
    html, body, #cesiumContainer {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
    }
    #loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-family: sans-serif;
    }
  </style>
</head>
<body>
  <div id="cesiumContainer"></div>
  <div id="loading">üåç Loading 3D Map...</div>

  <script>
    // ‚úÖ Lightweight mobile setup
    const viewer = new Cesium.Viewer('cesiumContainer', {
      // use a global map provider
      imageryProvider: new Cesium.UrlTemplateImageryProvider({
        url: 'https://tile.openstreetmap.org/{z}/{x}/{y}.png'
      }),
      terrainProvider: new Cesium.EllipsoidTerrainProvider(),
      baseLayerPicker: false,
      animation: false,
      timeline: false,
      sceneModePicker: false,
      navigationHelpButton: false,
      geocoder: false
    });

    // Turn off heavy post-processing for smooth mobile performance
    viewer.scene.fxaa = false;
    viewer.scene.postProcessStages.fxaa.enabled = false;
    viewer.scene.globe.enableLighting = false;

    // Hide loading text once tiles load
    viewer.scene.globe.tileLoadProgressEvent.addEventListener(function(remaining) {
      if (remaining === 0) {
        document.getElementById('loading').style.display = 'none';
      }
    });

    // Start view from space
    viewer.camera.setView({
      destination: Cesium.Cartesian3.fromDegrees(0, 0, 20000000)
    });

    // Smoothly fly to Tharparkar after a pause
    setTimeout(() => {
      viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(69.8, 24.8, 3000000),
        duration: 8,
        easingFunction: Cesium.EasingFunction.SINUSOIDAL_IN_OUT
      });

      // Add Tharparkar marker
      viewer.entities.add({
        position: Cesium.Cartesian3.fromDegrees(69.8, 24.8),
        point: { pixelSize: 10, color: Cesium.Color.YELLOW },
        label: {
          text: "Tharparkar",
          font: "14px sans-serif",
          fillColor: Cesium.Color.WHITE,
          verticalOrigin: Cesium.VerticalOrigin.BOTTOM
        }
      });
    }, 2000);
  </script>
</body>
</html>
